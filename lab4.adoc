= Операционные системы

== Определение:
____
Операционная система — это основа взаимодействия пользователя и аппаратного обеспечения.
____

== 1. Понятие операционной системы

Операционная система (ОС) — это комплекс программ, управляющих ресурсами компьютера и обеспечивающих выполнение пользовательских и системных приложений.

|===
| *Функции ОС* | *Описание*

| Процессорное управление | Распределение времени между процессами
| Управление памятью      | Выделение и освобождение ОЗУ
| Файловая система        | Создание, чтение и управление файлами
| Ввод/вывод              | Работа с устройствами (клавиатура, дисплей и др.)
| Интерфейс               | Командная строка или графическая оболочка
|===

== 2. Операционные системы реального времени (ОСРВ)

ОСРВ ориентированы на задачи, где критична точность времени исполнения.

====
В системах реального времени задержки могут быть фатальными. Поэтому ОСРВ разрабатываются с прицелом на *детерминированность* и *минимальные задержки*.
====

=== Классификация ОСРВ

|===
| Вид | Описание

| *Жесткого реального времени (Hard RTOS)* 
| Тайминги должны соблюдаться строго. Нарушение — критично (например, управление двигателями в самолёте).

| *Мягкого реального времени (Soft RTOS)* 
| Допускаются небольшие временные отклонения. Пример — мультимедийные проигрыватели.
|===

== 3. Многозадачность

Многозадачность — способность ОС выполнять несколько задач одновременно.

*Варианты реализации:*

- Кооперативная — задача передаёт управление добровольно;
- Вытесняющая — ОС сама решает, когда прервать выполнение.

== 4. Планировщик

====
Планировщик — "дирижёр" системы, распределяющий ресурсы между задачами.
====

.Критерии планирования:
* Приоритеты
* Время ожидания
* Политика ОС

В системах реального времени используется *вытесняющий приоритетный* планировщик.

== 5. FreeRTOS

FreeRTOS — лёгкая операционная система реального времени с открытым исходным кодом.

|===
| Характеристика | Описание

| Компактность | Ядро занимает минимум памяти
| Портируемость | Поддержка множества микроконтроллеров (ARM, AVR и др.)
| API | Удобные функции управления задачами, очередями, мьютексами и др.
|===

== 6. Межзадачное взаимодействие (МЗВ)

МЗВ — механизмы обмена информацией и синхронизации между задачами.

Типы взаимодействия:

- Очереди
- Семафоры
- Мьютексы
- События
- Потоки сообщений
- Уведомления задач

== 7. Задачи

Задача (Task) — наименьшая исполняемая единица в ОСРВ.

В FreeRTOS:

- Создаётся через xTaskCreate()
- Имеет приоритет
- Выполняется с вытесняющей многозадачностью

== 8. Отключение планировщика и прерываний

Такие действия допустимы:

* Во время инициализации
* В критических секциях
* При необходимости предотвратить переключение задач

====
Отключения должны быть минимальными по времени, иначе возможны нарушения таймингов.
====

== 9. Мьютексы

Мьютекс (mutex) — средство синхронизации, предназначенное для защиты ресурсов от одновременного доступа.

.Преимущества:
* Только одна задача может владеть мьютексом
* Поддержка *наследования приоритета*
* Возможность создания *рекурсивных* мьютексов

== 10. Дедлок (Deadlock)

====
Дедлок — состояние, при котором задачи навсегда ожидают друг друга, блокируя работу системы.
====

.Причины:
* Циклическое ожидание
* Неправильный порядок захвата ресурсов

.Методы предотвращения:
- Тайм-ауты при захвате ресурсов
- Единый порядок доступа к ресурсам
- Избежание вложенных блокировок